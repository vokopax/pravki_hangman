# games/hangman.py
import random

# === –ß–∞—Å—Ç—å –ù–∞—Å—Ç–∏ (—Ñ—É–Ω–∫—Ü–∏–∏) ===
def load_words_from_file(filename="data/words.txt"):
    """–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞"""
    words_list = [] #—Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –∏–∑ —Å–ø–∏—Å–∫–∞
    try: #–ø—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è
        with open(filename, 'r', encoding='utf-8') as file:
            lines = file.readlines()
            for line in lines: #–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É
                word = line.strip() #—É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ —Å–∏–º–≤–æ–ª—ã
                if word: #–ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –ø—É—Å—Ç–∞—è
                    words_list.append(word)
    except FileNotFoundError: #–µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä
        print("–û—à–∏–±–∫–∞: –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–ª–æ–≤–∞.")
        words_list = ["–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "–≤–∏—Å–µ–ª–∏—Ü–∞", "—Å—Ç—É–¥–µ–Ω—Ç", "–∞–ª–≥–æ—Ä–∏—Ç–º"]
    except Exception as error: #–ª—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞
        print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞: {error}")
        words_list = ["–æ—à–∏–±–∫–∞", "–∏—Å–∫–ª—é—á–µ–Ω–∏–µ"]
    return words_list #–≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤

def select_random_word(words):
    """–í—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞""" #–ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–ø–∏—Å–æ–∫ –Ω–µ –ø—É—Å—Ç–æ–π
    if len(words) == 0:
        return "–ø–∏—Ç–æ–Ω"
    return random.choice(words) #—Å–ª–æ–≤–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

def check_letter_in_word(letter, secret_word):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –±—É–∫–≤–∞ –≤ —Å–ª–æ–≤–µ"""
    return letter in secret_word

def update_display_word(secret_word, guessed_letters):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ª–æ–≤–∞ —Å —É–≥–∞–¥–∞–Ω–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏"""
    result = ""
    for char in secret_word: #–¥–ª—è –∫–∞–∂–¥–æ–π –±—É–∫–≤—ã –≤ —Å–ª–æ–≤–µ
        if char in guessed_letters:
            result += char + " " #–µ—Å–ª–∏ –±—É–∫–≤–∞ —É–≥–∞–¥–∞–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
        else:
            result += "_ " #–∏–Ω–∞—á–µ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ
    return result.strip()

def is_word_guessed(secret_word, guessed_letters):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–∏ —É–≥–∞–¥–∞–Ω–æ —Å–ª–æ–≤–æ"""
    for char in secret_word: #–ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –±—É–∫–≤—É –≤ —Å–ª–æ–≤–µ
        if char not in guessed_letters: #–µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –Ω–µ —É–≥–∞–¥–∞–Ω–∞
            return False
    return True


# === –ß–∞—Å—Ç—å –¢–∏–Ω—ã (–∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å) ===
import time  #PRAVKA –¥–ª—è —Å—á—ë—Ç—á–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏


def draw_hangman_stage(incorrect_guesses):
    #—Ä–∏—Å—É–µ–º –≤–∏—Å–µ–ª–∏—Ü—É –∫–∞–∫ –æ–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—à–∏–±–æ–∫

    #—Å–ª–æ–≤–∞—Ä—å —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –≤–∏—Å–µ–ª–∏—Ü—ã
    hangman_pictures = {
        0: """
  ------
  |    |
       |
       |
       |
       |
       |
=========""",
        1: """
  ------
  |    |
  O    |
       |
       |
       |
       |
=========""",
        2: """
  ------
  |    |
  O    |
  |    |
       |
       |
       |
=========""",
        3: """
  ------
  |    |
  O    |
 /|    |
       |
       |
       |
=========""",
        4: """
  ------
  |    |
  O    |
 /|\   |
       |
       |
       |
=========""",
        5: """
  ------
  |    |
  O    |
 /|\   |
 /     |
       |
       |
=========""",
        6: """
  ------
  |    |
  O    |
 /|\   |
 / \   |
       |
       |
========="""
    }
    #–ø–æ–ª—É—á–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—à–∏–±–æ–∫
    #–∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ get —á—Ç–æ–±—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ –∏–≥—Ä–∞ –Ω–µ —É–ø–∞–ª–∞
    return hangman_pictures.get(incorrect_guesses, "–û—à–∏–±–∫–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏")


def get_player_input(used_letters):
    #–¥–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
    while True:  #–¥–µ–ª–∞–µ–º –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–≤–æ–¥
        try:
            #–∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤–≤–æ–¥
            user_input = input("–í–≤–µ–¥–∏—Ç–µ –æ–¥–Ω—É –±—É–∫–≤—É: ").strip().lower()
            #–ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
            if not user_input:
                print("–í—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤–≤–µ–ª–∏! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
                continue
            #–ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–¥–Ω–∞ –ª–∏ –±—É–∫–≤–∞
            if len(user_input) != 1:
                print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¢–û–õ–¨–ö–û –û–î–ù–£ –±—É–∫–≤—É!")
                continue
                #–ø—Ä–æ–≤–µ—Ä—è–µ–º —ç—Ç–æ –±—É–∫–≤–∞?
            if not user_input.isalpha():
                print("–≠—Ç–æ –Ω–µ –±—É–∫–≤–∞! –í–≤–µ–¥–∏—Ç–µ –±—É–∫–≤—É –æ—Ç '–∞' –¥–æ '—è'.")
                continue
            #–ø—Ä–æ–≤–µ—Ä—è–µ–º —É–∂–µ –≤–≤–æ–¥–∏–ª–∏ —ç—Ç—É –±—É–∫–≤—É?
            if user_input in used_letters:
                print(f"–í—ã —É–∂–µ –≤–≤–æ–¥–∏–ª–∏ –±—É–∫–≤—É '{user_input}'! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é.")
                continue
                #–µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
            return user_input

        except KeyboardInterrupt:  #–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª Ctrl+C
            print("\n–ò–≥—Ä–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞.")
            return None
        except Exception as e:  #–ª—é–±–∞—è –¥—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞
            print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")
            continue


def get_player_input_with_word_guess(used_letters, secret_word):
    """–ü–†–ê–í–ö–ê –ø–æ–ª—É—á–∞–µ–º –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–≥–∞–¥–∞—Ç—å —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º
    (–≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –¥–æ–≥–∞–¥–∞–ª—Å—è, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –¥–∞–ª—å—à–µ –±—É–∫–≤—ã"""
    while True:
        try:
            user_input = input("–í–≤–µ–¥–∏—Ç–µ –±—É–∫–≤—É –∏–ª–∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º: ").strip().lower()

            #–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –ø—É—Å—Ç–æ–π –≤–≤–æ–¥
            if not user_input:
                print("–í—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤–≤–µ–ª–∏! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
                continue

            #–µ—Å–ª–∏ –≤–≤–µ–ª–∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º (–¥–ª–∏–Ω–∞ –±–æ–ª—å—à–µ 1 —Å–∏–º–≤–æ–ª–∞)
            if len(user_input) > 1:
                #–ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ —Å–ª–æ–≤–æ (—Ç–∞–º —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã)
                if not user_input.replace(" ", "").isalpha():
                    print("–°–ª–æ–≤–æ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã!")
                    continue

                #–ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –∑–∞–≥–∞–¥–∞–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º
                if user_input == secret_word:
                    return "–ü–†–ê–í–ò–õ–¨–ù–û–ï —Å–ª–æ–≤–æ", user_input
                else:
                    return "–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ï —Å–ª–æ–≤–æ", user_input

            #–µ—Å–ª–∏ –≤–≤–µ–ª–∏ –æ–¥–Ω—É –±—É–∫–≤—É
            else:
                #–ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç—Ç–æ –±—É–∫–≤–∞
                if not user_input.isalpha():
                    print("–≠—Ç–æ –Ω–µ –±—É–∫–≤–∞!")
                    continue

                #–ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±—É–∫–≤–∞ –µ—â–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å
                if user_input in used_letters:
                    print(f"–í—ã —É–∂–µ –≤–≤–æ–¥–∏–ª–∏ –±—É–∫–≤—É '{user_input}'! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é.")
                    continue

                return "LETTER", user_input

        except KeyboardInterrupt:
            print("\n–ò–≥—Ä–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞.")
            return "EXIT", None
        except Exception as e:
            print(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {e}")
            continue


def give_hint(secret_word, guessed_letters):
    """–ü–†–ê–í–ö–ê –¥–∞—ë–º –æ–¥–Ω—É –ø–æ–¥—Å–∫–∞–∑–∫—É –∑–∞ –∏–≥—Ä—É
    ( –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–≤—É—é –Ω–µ–æ—Ç–≥–∞–¥–∞–Ω–Ω—É—é –±—É–∫–≤—É)
    """
    #–Ω–∞—Ö–æ–¥–∏–º –ø–µ—Ä–≤—É—é –Ω–µ–æ—Ç–≥–∞–¥–∞–Ω–Ω—É—é –±—É–∫–≤—É –≤ —Å–ª–æ–≤–µ
    for i, letter in enumerate(secret_word):
        if letter not in guessed_letters:
            print(f"üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤ —Å–ª–æ–≤–µ –µ—Å—Ç—å –±—É–∫–≤–∞ '{letter}'")
            print(f"   –û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ {i + 1}")
            return letter  #–≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±—É–∫–≤—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    return None  #–µ—Å–ª–∏ –≤—Å–µ –±—É–∫–≤—ã —É–∂–µ —É–≥–∞–¥–∞–Ω—ã


def play_hangman():
    #–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–≥—Ä—ã (–æ–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —á–∞—Å—Ç–∏)
    print("=" * 60)
    print("         –ò–ì–†–ê '–í–ò–°–ï–õ–ò–¶–ê'")
    print("=" * 60)
    print("–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏: –ù–∞—Å—Ç—è –∏ –¢–∏–Ω–∞")
    print("–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: –û—Å–Ω–æ–≤—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Python")
    print("=" * 60)

    #–ü–†–ê–í–ö–ê –Ω–∞—á–∏–Ω–∞–µ–º –æ—Ç—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏
    start_time = time.time()

    #–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —á–∞—Å—Ç–∏ –Ω–∞—Å—Ç–∏)
    print("\n–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–∞ –∏–∑ —Ñ–∞–π–ª–∞...")
    words = load_words_from_file()

    if len(words) == 0:
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–æ–≤–∞. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä.")
        words = ["–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "—Å—Ç—É–¥–µ–Ω—Ç", "–≤–∏—Å–µ–ª–∏—Ü–∞"]

    #–≤—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–ª–æ–≤–∞
    secret_word = select_random_word(words)

    #–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
    guessed_letters = []  #—É–≥–∞–¥–∞–Ω–Ω—ã–µ –±—É–∫–≤—ã
    wrong_letters = []  #–Ω–µ–≤–µ—Ä–Ω—ã–µ –±—É–∫–≤—ã
    wrong_words = []  #+ —Å–ø–∏—Å–æ–∫ –Ω–µ–≤–µ—Ä–Ω–æ —É–≥–∞–¥–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤
    attempts_left = 6  #—Å–∫ –≤—Å–µ–≥–æ –ø–æ–ø—ã—Ç–æ–∫
    game_over = False  #–æ–∫–æ–Ω—á–∞–Ω–∏–µ –∏–≥—Ä—ã
    word_guessed = False  #+ —Ñ–ª–∞–≥ —É–≥–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
    hint_used = False  #+ —Ñ–ª–∞–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏

    print(f"\n–Ø –∑–∞–≥–∞–¥–∞–ª —Å–ª–æ–≤–æ –∏–∑ {len(secret_word)} –±—É–∫–≤.")
    print("–£ –≤–∞—Å –µ—Å—Ç—å 6 –ø–æ–ø—ã—Ç–æ–∫, —á—Ç–æ–±—ã —É–≥–∞–¥–∞—Ç—å —Å–ª–æ–≤–æ.")
    print("–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∫–∞–∫ –±—É–∫–≤—ã, —Ç–∞–∫ –∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º!")
    print("üí° –£ –≤–∞—Å –µ—Å—Ç—å 1 –ø–æ–¥—Å–∫–∞–∑–∫–∞ –Ω–∞ –≤—Å—é –∏–≥—Ä—É!")  #+ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥—Å–∫–∞–∑–∫–µ
    print("–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–∏–Ω–∞—Ç—å!")

    #–æ—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    while not game_over and attempts_left > 0:
        print("\n" + "-" * 40)
        print(draw_hangman_stage(len(wrong_letters)))

        #—Ä–∏—Å—É–µ–º –≤–∏—Å–µ–ª–∏—Ü—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ª–æ–≤–∞
        current_display = update_display_word(secret_word, guessed_letters)
        print(f"\n–°–ª–æ–≤–æ: {current_display}")

        #–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–≤–µ—Ä–Ω—ã–µ –±—É–∫–≤—ã, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
        if wrong_letters:
            print(f"–ù–µ–≤–µ—Ä–Ω—ã–µ –±—É–∫–≤—ã: {', '.join(wrong_letters)}")

        #–ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ–≤–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
        if wrong_words:
            print(f"–ù–µ–≤–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞: {', '.join(wrong_words)}")

        print(f"–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: {attempts_left}")

        #–ü–†–ê–í–ö–ê –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ "–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π" —Å–∏—Ç—É–∞—Ü–∏–∏
        if not hint_used and attempts_left <= 2:  #—Ç.–µ –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–ª–æ—Å—å –º–∞–ª–æ –ø–æ–ø—ã—Ç–æ–∫
            print(f" –í–Ω–∏–º–∞–Ω–∏–µ! –û—Å—Ç–∞–ª–æ—Å—å –≤—Å–µ–≥–æ {attempts_left} –ø–æ–ø—ã—Ç–æ–∫!")
            use_hint = input("–•–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É? (–¥–∞/–Ω–µ—Ç): ").lower()
            if use_hint in ['–¥–∞', '–¥', 'yes', 'y']:
                hint_letter = give_hint(secret_word, guessed_letters)
                if hint_letter:
                    guessed_letters.append(hint_letter)
                    hint_used = True
                    print(f"‚úÖ –ë—É–∫–≤–∞ '{hint_letter}' –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫ —É–≥–∞–¥–∞–Ω–Ω—ã–º!")
                    continue  #–ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞
                else:
                    print("–í—Å–µ –±—É–∫–≤—ã —É–∂–µ —É–≥–∞–¥–∞–Ω—ã!")
            else:
                print("–•–æ—Ä–æ—à–æ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–∫–∏.")

        #–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é –≤–≤–æ–¥–∞
        input_type, user_input = get_player_input_with_word_guess(
            guessed_letters + wrong_letters,
            secret_word
        )

        #–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ—Ä–≤–∞–ª –∏–≥—Ä—É
        if input_type == "EXIT":
            print("–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–æ—Å—Ä–æ—á–Ω–æ.")
            return

        #–µ—Å–ª–∏ —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º
        elif input_type == "–ü–†–ê–í–ò–õ–¨–ù–û–ï —Å–ª–æ–≤–æ":
            print(f"\nüéâüéâüéâ –í–û–¢ –≠–¢–û –î–ê! –í—ã —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º!")
            print(f"–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ: {secret_word.upper()}")
            word_guessed = True
            game_over = True
            break

        #–µ—Å–ª–∏ –≤–≤–µ–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ
        elif input_type == "–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ï —Å–ª–æ–≤–æ":
            print(f"\n‚úó –ù–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ: '{user_input}'")
            wrong_words.append(user_input)

            #—à—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ –∫–∞–∫ –∏ –∑–∞ –±—É–∫–≤—É (–º–∏–Ω—É—Å 1 –ø–æ–ø—ã—Ç–∫–∞)
            print("–ó–∞ –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ —Ç–µ—Ä—è–µ—Ç—Å—è 1 –ø–æ–ø—ã—Ç–∫–∞!")
            attempts_left -= 1

            #–¥–∞—ë–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ—Å–ª–µ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Å–ª–æ–≤–∞
            if len(wrong_words) == 1:  #–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–∏
                print(f"–ü–µ—Ä–≤–∞—è –±—É–∫–≤–∞ —Å–ª–æ–≤–∞: '{secret_word[0]}'")
            elif len(wrong_words) == 2:  #–ø–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–π –æ—à–∏–±–∫–∏
                print(f"–ü–æ—Å–ª–µ–¥–Ω—è—è –±—É–∫–≤–∞ —Å–ª–æ–≤–∞: '{secret_word[-1]}'")

            continue

        #–µ—Å–ª–∏ –≤–≤–µ–ª–∏ –±—É–∫–≤—É (–æ–±—ã—á–Ω—ã–π —Ö–æ–¥)
        elif input_type == "LETTER":
            letter = user_input

            #–ø—Ä–æ–≤–µ—Ä—è–µ–º –±—É–∫–≤—É
            if check_letter_in_word(letter, secret_word):
                print(f"\n‚úì –û—Ç–ª–∏—á–Ω–æ! –ë—É–∫–≤–∞ '{letter}' –µ—Å—Ç—å –≤ —Å–ª–æ–≤–µ!")
                guessed_letters.append(letter)
            else:
                print(f"\n‚úó –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –±—É–∫–≤—ã '{letter}' –Ω–µ—Ç –≤ —Å–ª–æ–≤–µ.")
                wrong_letters.append(letter)
                attempts_left -= 1

        #–ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—ã–∏–≥—Ä–∞–ª –ª–∏ –∏–≥—Ä–æ–∫
        if is_word_guessed(secret_word, guessed_letters):
            print("\n" + "=" * 50)
            print("–ü–û–ó–î–†–ê–í–õ–Ø–Æ! –í–´ –í–´–ò–ì–†–ê–õ–ò! üéâ")
            print(f"–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ: {secret_word.upper()}")
            print("=" * 50)
            game_over = True

    #++ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ–º –æ—Ç—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏
    end_time = time.time()
    game_duration = end_time - start_time

    #–æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≥–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞
    if word_guessed:
        print("\n" + "=" * 50)
        print("üéâ –û–ì–û! –í–´ –£–ì–ê–î–ê–õ–ò –°–õ–û–í–û –¶–ï–õ–ò–ö–û–ú! üéâ")
        print("=" * 50)
        print(f"–í—ã —Å—ç–∫–æ–Ω–æ–º–∏–ª–∏ {attempts_left} –ø–æ–ø—ã—Ç–æ–∫!")



    #+ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ä–µ–º—è –∏–≥—Ä—ã
    print(f"\n –í—Ä–µ–º—è –∏–≥—Ä—ã: {game_duration:.1f} —Å–µ–∫—É–Ω–¥")

    #–ø–∏—à–µ–º —Ä–µ–∫–æ—Ä–¥—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    if is_word_guessed(secret_word, guessed_letters) or word_guessed:
        if game_duration < 30:
            print("–§–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å! max verstappen?!?!")
        elif game_duration < 60:
            print("–û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è! –í—ã –±—ã—Å—Ç—Ä–æ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å!")
        elif game_duration < 120:
            print("–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!")

    #–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∏–≥—Ä—ã—à–∞ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ word_guessed)
    if attempts_left == 0 and not game_over and not word_guessed:
        print("\n" + "=" * 50)
        print(draw_hangman_stage(6))
        print("–ö –°–û–ñ–ê–õ–ï–ù–ò–Æ, –í–´ –ü–†–û–ò–ì–†–ê–õ–ò! üò¢")
        print(f"–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ –±—ã–ª–æ: {secret_word.upper()}")
        print("=" * 50)

    #–ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑
    print("\n" + "-" * 40)
    while True:
        choice = input("–•–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑ –≤ –í–∏—Å–µ–ª–∏—Ü—É? (–¥–∞/–Ω–µ—Ç): ").lower()
        if choice in ['–¥–∞', '–¥', 'yes', 'y']:
            print("\n" * 3)
            play_hangman()
            break
        elif choice in ['–Ω–µ—Ç', '–Ω', 'no', 'n']:
            print("\n–í–æ–∑–≤—Ä–∞—â–∞—é—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é...")
            break
        else:
            print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ '–¥–∞' –∏–ª–∏ '–Ω–µ—Ç'")


